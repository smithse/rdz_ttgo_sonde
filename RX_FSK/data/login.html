<!DOCTYPE html>
<html lang="en">
<head>
    <title>rdzTTGOSonde Login</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Login Form</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="sha256.min.js" type="text/javascript"></script>
    <script>
        function computeHash(event) {
            event.preventDefault(); // Prevent form's default submission behavior
            const username = document.getElementById('user').value;
            const password = document.getElementById('pass').value;
            const preauth = document.getElementById('preauth').value;
            const hashInput = `${username}:${preauth}:${password}`;
            const hash = sha256(hashInput);
            document.getElementById('auth').value = hash;
            document.getElementById('pass').value = '';
            document.getElementById('loginForm').submit();
        }
    </script>
</head>
<body>
<div class="wrapper">
 <div class="header"><div id="myTopnav" class="topnav">
  <a id="defaultTab" class="tablinks active">Login</a>
 </div></div>
 <div id="Login" class="tabcontent" style="display: flex;">
  <div class="system-info">
  <h1>%VERSION_NAME% version %VERSION_ID%</h1>
  <p>Copyright &copy; 2019-2024 by Hansi Reiser, DL9RDZ and contributors</p>
  <br>
    <form id="loginForm" action="/login.html" method="POST" onsubmit="computeHash(event)">
        <label for="user">Username:</label>
        <input type="text" id="user" name="user" required><br><br>
        
        <label for="pass">Password:</label>
        <input type="password" id="pass" name="pass" required><br><br>

        <input type="hidden" id="preauth" name="preauth" value="%PREAUTH%">
        <input type="hidden" id="auth" name="auth" value=""> 
        <button type="submit">Login</button>
    </form>
  </div>
  <div class="footer"><span></span><span class="ttgoinfo">rdzTTGOserver %VERSION_ID%</span></div>
 </div>
</div>
</body>
</html>
